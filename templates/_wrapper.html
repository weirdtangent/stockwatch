{{- define "_header" -}}
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="google-signin-client_id" content="602086455575-vj2spkou0ucsntgol9srfkf8mka3o5i2.apps.googleusercontent.com">
    <link href="/static/css/custom-dark.css" rel="stylesheet">
    <link href="/static/vendor/fontawesome/css/all.css" rel="stylesheet">
    <link href="/static/css/internal.css" rel="stylesheet">
    <title>Graystorm StockWatch</title>
  </head>

  <body id="page-top" class="{{.config.TmplName}}">
    <script src="/static/vendor/jquery/jquery-3.5.1.min.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- Navigation -->
    <nav class="nav navbar-dark bg-primary brand-banner">
      <div class="container-fluid">
        <div class="row">
          <h1 class=""><img src="/static/images/rocket.png"><a href="/" class="navbar-brand text-decoration-none ps-2 align-middle">Graystorm StockWatch</a></h1>
        </div><!-- row -->
        <div class="row">
          <div class="col-8 col-lg-9 col-xl-10 float-start">
            <ul class="nav me-auto mb-2">
              <li class="nav-item"><a class="nav-link" href="#section1">Favorites</a></li>
              <li class="nav-item"><a class="nav-link" href="#section2">Watch</a></li>
              <li class="nav-item"><a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a></li>
            </ul>
            {{if .recents}}
            <ul class="nav me-auto mb-2 small">
              <li class="nav-item mx-1">Recent:</li>
              {{range .recents -}}
                <li class="nav-item mx-1"><a href="/view/{{.Symbol}}/{{.Acronym}}"><button type="button" class="badge text-dark bg-warning"><i class="fas fa-dollar-sign"></i>{{.Symbol}}</button></a></li>
              {{end -}}
            </ul>
            {{end -}}
          </div><!-- float-start -->
          <div class="col-4 col-lg-3 col-xl-2 my-2 align-self-center flush-right">
            <img class="image-fluid rounded" src="{{.Config.GoogleProfile.PictureURL}}">
          </div>
          {{if .loggedout}}
          <div id="g_id_onload"
             data-client_id="602086455575-vj2spkou0ucsntgol9srfkf8mka3o5i2.apps.googleusercontent.com"
             data-auto_select="true" data-context="use" data-login_uri="https://stockwatch.graystorm.com/login">
          </div>
          {{end}}
        </div><!-- row -->
      </div>
    </nav>

    <div class="screen"><!-- wrapper screen -->
      <div class="row g-0"><!-- wrapper row -->
        <div class="col-6 col-sm-5 col-md-4 col-lg-3 col-xxl-2 bg-dark px-1 px-md-3">
          {{ template "_sidemenu" . }}
        </div><!-- col-2 -->
        <div class="col-6 col-sm-7 col-md-8 col-lg-9 col-xxl-10 mb-n5"><!-- wrapper col -->
{{- end}}

{{- define "_messages" -}}
                  {{if .messages.Messages }}
                    {{range .messages.Messages }}
                      <div class="text-{{.Level}}">{{.Text}}</div>
                    {{end}}
                  {{end}}
{{- end}}

{{- define "_messageblock" -}}
            {{if .messages.Messages }}
              <ul class="mx-2 list-group">
                  {{range .messages.Messages }}
                    {{if .Text}}<li class="list-group-item text-{{.Level}}">{{.Text}}</li>{{end}}
                  {{end}}
              </ul>
            {{end}}
{{- end}}

{{- define "_sidemenu" -}}
          <div class="">
            <form method="POST" action="/search/ticker" class="form-control bg-primary mt-3">
              <input class="row mx-0 my-2 form-control-sm" name="searchString" type="search" placeholder="Symbol/Company name" aria-label="Symbol Search">
              <button class="row mx-0 my-2 form-control-sm bg-light text-dark" type="submit">Search</button>
            </form>
            {{if .WID}}
            <ul class="nav me-auto mb-2 mb-lg-0">
              <li class="nav-item me-1 w-100 text-warning text-center welcome">Welcome back<br>{{.watcher.WatcherName}}!</li>
              <li class="nav-item"><a class="nav-link" href="#section1">Account</a></li>
              <li class="nav-item"><a class="nav-link" href="#section2">Holdings</a></li>
              <li class="nav-item"><a class="nav-link" href="#section3">Preferences</a></li>
              <li class="nav-item g_id_signout"><a class="nav-link" href="/logout" class="signout">Disconnect Google</a></li>
              {{if .watcher.IsAdmin}}
              <li class="nav-item"><a class="nav-link link-warning" href="/update/exchanges">Update Exchanges</a></li>
              {{end}}
            </ul>
            {{end}}
          </div>
{{- end}}

{{- define "_share_price" -}}
  {{ printf "$%.2f" .daily.ClosePrice }}
  {{if eq .lastDailyMove "up"}}<i class="fas fa-arrow-up text-success"></i>
  {{else if eq .lastDailyMove "down"}}<i class="fas fa-arrow-down text-danger"></i>
  {{end}}at close on <a href="/view/{{.ticker.TickerSymbol}}/{{.exchange.ExchangeAcronym}}/{{.daily.PriceDate}}">{{ .daily.PriceDate }}</a>
{{- end}}

{{- define "_ticker_top" -}}
              <header class="bg-dark pt-2">
                <div class="d-flex">
                  <div>
                    <h3>Symbol: <a class="link-light" href="/view/{{.ticker.TickerSymbol}}/{{.exchange.ExchangeAcronym}}">{{.ticker.TickerSymbol}}</a> ({{.exchange.ExchangeAcronym}})</h3>
                    <h5>{{.ticker.TickerName}}</h5>
                    <h6 class="small text-info">Share price: <span class="text-light">{{ template "_share_price" . }}</span></h6>
                  </div>
                  <div class="flex-grow-1 text-end">
                    {{ template "_messages" . }}
                  </div>
                </div>
                <div class="d-flex">
                  <div class="flex-grow-1" id="toggle">
                    <hr class="my-1 text-white opacity-3">
                    <div class="btn-group" role="group" aria-label="Chart or table to show">
                      <input type="radio" class="btn-check" name="pickChart" id="tickerChart1" autocomplete="off" checked>
                      <label class="btn-sm btn-outline-success mx-1" for="tickerChart1"><i class="fas fa-chart-line"></i> Line</label>

                      <input type="radio" class="btn-check" name="pickChart" id="tickerChart2" autocomplete="off">
                      <label class="btn-sm btn-outline-success mx-1" for="tickerChart2"><i class="fas fa-chart-bar"></i> Candlestick</label>

                      <input type="radio" class="btn-check" name="pickChart" id="tickerChart3" autocomplete="off">
                      <label class="btn-sm btn-outline-success mx-1" for="tickerChart3"><i class="fas fa-table"></i> Table</label>
                    </div>
                  </div>
                </div>
              </header>
{{- end}}

{{- define "_chart_js" -}}
    <script src="/static/vendor/echarts/dist/echarts.min.js"></script>
    <script src="/static/vendor/echarts/theme/vintage.js"></script>
{{- end}}

{{- define "_footer" -}}
        </div><!-- wrapper col -->
      </div><!-- wrapper row -->
    </div><!-- wrapper screen -->

    <!-- Footer -->
    <footer class="footer fixed-bottom fs-6 align-middle text-light row">
        <div class="col-2">
          <p class="lh-1 small">&copy;2021 -
            <a href="mailto:jeff@graystorm.com" class="text-decoration-none">jeff@graystorm.com</a>
          </p>
        </div>
    </footer>

  </body>
</html>
{{- end}}
